<!-- viewer_multi.html -->
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“š å¤šåª’é«”æ•™æä¸­å¿ƒ | CHDAY169 æ•´åˆå¼PDFèˆ‡å½±ç‰‡æ’­æ”¾å™¨</title>
  <link rel="stylesheet" href="assets/style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.9.179/pdf.worker.min.js';
  </script>
  <style>
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    
    /* æ¨™ç±¤é æ¨£å¼ */
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      border-bottom: 2px solid #4a6fa5;
      padding-bottom: 10px;
      flex-wrap: wrap;
    }
    
    .tab-btn {
      padding: 12px 24px;
      background: #f0f0f0;
      border: none;
      border-radius: 8px 8px 0 0;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }
    
    .tab-btn.active {
      background: #4a6fa5;
      color: white;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
      animation: fadeIn 0.5s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    /* é é¢é ­éƒ¨æ¨£å¼ */
    .page-header {
      text-align: center;
      margin-bottom: 30px;
      padding: 25px;
      background: linear-gradient(135deg, #4a6fa5 0%, #6b8cbc 100%);
      color: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .page-header h1 {
      margin: 0;
      font-size: 2.2rem;
    }
    
    .subtitle {
      margin-top: 10px;
      font-size: 1.1rem;
      opacity: 0.9;
    }
    
    /* æ•´åˆé€šçŸ¥ */
    .integration-notice {
      background: linear-gradient(135deg, #d4edda, #c3e6cb);
      border-left: 5px solid #28a745;
      padding: 15px 20px;
      border-radius: 8px;
      margin-bottom: 25px;
      color: #155724;
    }
    
    /* PDFé–±è®€å™¨æ¨£å¼ */
    .pdf-viewer {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .pdf-sidebar {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border: 1px solid #e9ecef;
    }
    
    .pdf-controls {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 20px;
    }
    
    .pdf-canvas-container {
      background: #f5f5f5;
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      min-height: 600px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    
    #pdfCanvas {
      max-width: 100%;
      max-height: 800px;
      border: 1px solid #ddd;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      background: white;
    }
    
    /* å½±ç‰‡æ’­æ”¾å™¨æ¨£å¼ */
    .video-viewer {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .video-player-container {
      background: #000;
      border-radius: 12px;
      overflow: hidden;
      position: relative;
    }
    
    #videoPlayer {
      width: 100%;
      height: 500px;
      display: block;
    }
    
    /* æ‹–æ”¾å€åŸŸæ¨£å¼ */
    .drop-zone {
      border: 3px dashed #4a6fa5;
      border-radius: 12px;
      padding: 40px 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
      background: #f8f9fa;
      margin-bottom: 20px;
    }
    
    .drop-zone:hover {
      background: #e9ecef;
      border-color: #3a5a8c;
    }
    
    .drop-zone.dragover {
      background: #d0e1ff;
      border-color: #2a4a7c;
    }
    
    /* æª”æ¡ˆåˆ—è¡¨æ¨£å¼ */
    .file-list {
      list-style: none;
      padding: 0;
      max-height: 300px;
      overflow-y: auto;
      border: 1px solid #e9ecef;
      border-radius: 8px;
    }
    
    .file-list li {
      padding: 12px 15px;
      border-bottom: 1px solid #eee;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .file-list li:last-child {
      border-bottom: none;
    }
    
    .file-list li:hover {
      background: #e9ecef;
    }
    
    .file-list li.active {
      background: #4a6fa5;
      color: white;
    }
    
    .file-icon {
      font-size: 1.2rem;
    }
    
    /* Scratch æ•™ææ•´åˆå€å¡Š */
    .scratch-integration {
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      border-radius: 12px;
      padding: 25px;
      margin: 30px 0;
      border: 1px solid #dee2e6;
    }
    
    .scratch-categories {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    
    .category-card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s ease;
      border: 1px solid #dee2e6;
      cursor: pointer;
    }
    
    .category-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
      border-color: #4a6fa5;
    }
    
    /* æŒ‰éˆ•æ¨£å¼ */
    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn-primary {
      background: #4a6fa5;
      color: white;
    }
    
    .btn-primary:hover {
      background: #3a5a8c;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    
    .btn-secondary {
      background: #6c757d;
      color: white;
    }
    
    .btn-secondary:hover {
      background: #545b62;
      transform: translateY(-2px);
    }
    
    .btn-success {
      background: #28a745;
      color: white;
    }
    
    .btn-success:hover {
      background: #218838;
      transform: translateY(-2px);
    }
    
    .btn-outline {
      background: white;
      color: #4a6fa5;
      border: 2px solid #4a6fa5;
    }
    
    .btn-outline:hover {
      background: #4a6fa5;
      color: white;
    }
    
    /* YouTube æ•´åˆå€å¡Š */
    .youtube-integration {
      background: linear-gradient(135deg, #ffebee, #ffcdd2);
      border-radius: 12px;
      padding: 25px;
      margin: 30px 0;
      border: 1px solid #f5c6cb;
    }
    
    .youtube-videos {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }
    
    .youtube-card {
      background: white;
      border-radius: 8px;
      padding: 15px;
      transition: all 0.3s ease;
      border: 1px solid #dee2e6;
      cursor: pointer;
    }
    
    .youtube-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.1);
      border-color: #ff0000;
    }
    
    .youtube-thumbnail {
      width: 100%;
      height: 140px;
      background: #f8f9fa;
      border-radius: 6px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      margin-bottom: 10px;
      overflow: hidden;
    }
    
    .youtube-thumbnail img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    /* ç‹€æ…‹è¨Šæ¯ */
    .status-message {
      text-align: center;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      margin: 20px 0;
      color: #666;
      border: 1px dashed #dee2e6;
    }
    
    /* è¼‰å…¥å‹•ç•« */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid #f3f3f3;
      border-top: 3px solid #4a6fa5;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 10px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* é è…³æ¨£å¼ */
    .page-footer {
      margin-top: 50px;
      padding: 30px;
      text-align: center;
      background: #f8f9fa;
      border-radius: 12px;
      border-top: 3px solid #4a6fa5;
    }
    
    .navigation-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .footer-info {
      color: #666;
      font-size: 0.9rem;
      line-height: 1.6;
    }
    
    /* éºµåŒ…å±‘å°èˆª */
    .breadcrumb {
      margin-bottom: 25px;
      padding: 12px 18px;
      background: #f8f9fa;
      border-radius: 8px;
      font-size: 0.9rem;
      border: 1px solid #e9ecef;
    }
    
    .breadcrumb a {
      color: #4a6fa5;
      text-decoration: none;
      font-weight: 500;
    }
    
    .breadcrumb a:hover {
      text-decoration: underline;
    }
    
    .breadcrumb span {
      color: #666;
    }
    
    /* æ§åˆ¶åˆ— */
    .controls-row {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    
    .page-info {
      font-weight: 600;
      color: #333;
      font-size: 1.1rem;
      min-width: 150px;
      text-align: center;
    }
    
    .zoom-info {
      font-weight: 600;
      color: #333;
      font-size: 1.1rem;
      min-width: 100px;
      text-align: center;
    }
    
    /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
    @media (max-width: 992px) {
      .pdf-viewer,
      .video-viewer {
        grid-template-columns: 1fr;
      }
      
      .pdf-sidebar {
        order: 2;
      }
      
      .pdf-canvas-container,
      .video-player-container {
        order: 1;
      }
    }
    
    @media (max-width: 768px) {
      .tabs {
        flex-direction: column;
      }
      
      .tab-btn {
        width: 100%;
        border-radius: 8px;
        margin-bottom: 5px;
      }
      
      #videoPlayer {
        height: 300px;
      }
      
      .navigation-buttons {
        flex-direction: column;
        align-items: center;
      }
      
      .btn {
        width: 100%;
        max-width: 300px;
      }
    }
    
    @media (max-width: 480px) {
      .container {
        padding: 10px;
      }
      
      .page-header h1 {
        font-size: 1.8rem;
      }
      
      .scratch-categories,
      .youtube-videos {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body class="container">
  <header class="page-header">
    <h1>ğŸ“š å¤šåª’é«”æ•™æä¸­å¿ƒ</h1>
    <p class="subtitle">æ•´åˆå¼PDFé–±è®€å™¨èˆ‡å½±ç‰‡æ’­æ”¾å™¨ - æ”¯æ´æ‹–æ”¾ä¸Šå‚³èˆ‡ç·šä¸Šå…§å®¹</p>
  </header>

  <!-- æ•´åˆé€šçŸ¥ -->
  <div class="integration-notice">
    <strong>ğŸ‰ æ–°åŠŸèƒ½æ•´åˆå®Œæˆï¼</strong> æœ¬é é¢å·²æ•´åˆåŸå…ˆçš„ Scratch æ•™æç€è¦½å™¨å’Œ YouTube å½±ç‰‡æ’­æ”¾å™¨ï¼Œæä¾›çµ±ä¸€çš„å¤šåª’é«”é«”é©—ã€‚
  </div>

  <!-- å°èˆªéºµåŒ…å±‘ -->
  <nav class="breadcrumb">
    <a href="index.html">é¦–é </a> &gt; 
    <a href="viewer_multi.html">å¤šåª’é«”æ•™æä¸­å¿ƒ</a> &gt; 
    <span id="current-tab-name">PDFé–±è®€å™¨</span>
  </nav>

  <!-- æ¨™ç±¤é å°èˆª -->
  <div class="tabs">
    <button class="tab-btn active" data-tab="pdf-tab" onclick="switchTab('pdf')">ğŸ“„ PDFé–±è®€å™¨</button>
    <button class="tab-btn" data-tab="video-tab" onclick="switchTab('video')">ğŸ¥ å½±ç‰‡æ’­æ”¾å™¨</button>
    <button class="tab-btn" data-tab="scratch-tab" onclick="switchTab('scratch')">ğŸ¨ Scratchæ•™æ</button>
    <button class="tab-btn" data-tab="youtube-tab" onclick="switchTab('youtube')">ğŸ“º YouTubeå½±ç‰‡</button>
    <button class="tab-btn" data-tab="upload-tab" onclick="switchTab('upload')">ğŸ“¤ æª”æ¡ˆä¸Šå‚³</button>
  </div>

  <!-- PDFé–±è®€å™¨æ¨™ç±¤é  -->
  <div id="pdf-tab" class="tab-content active">
    <div class="pdf-viewer">
      <!-- å·¦å´æ§åˆ¶é¢æ¿ -->
      <div class="pdf-sidebar">
        <h3>ğŸ“š PDFæª”æ¡ˆåˆ—è¡¨</h3>
        
        <!-- æ‹–æ”¾å€åŸŸ -->
        <div class="drop-zone" id="pdfDropZone">
          <div style="font-size: 3em;">ğŸ“„</div>
          <p><strong>æ‹–æ”¾PDFæª”æ¡ˆåˆ°æ­¤è™•</strong></p>
          <p>æˆ–é»æ“Šé¸æ“‡æª”æ¡ˆ</p>
          <input type="file" id="pdfFileInput" accept=".pdf" style="display: none;">
          <button class="btn btn-primary" onclick="document.getElementById('pdfFileInput').click()">
            ğŸ“ é¸æ“‡PDFæª”æ¡ˆ
          </button>
        </div>
        
        <!-- æª”æ¡ˆåˆ—è¡¨ -->
        <ul class="file-list" id="pdfFileList">
          <li data-file="é è¨­PDF" data-url="./data_scr/pdfs/v1_chapter1.pdf">
            <span class="file-icon">ğŸ“„</span>
            <span>é è¨­ç¯„ä¾‹ï¼šchapter1 Scratchä»‹ç´¹</span>
          </li>
          <!-- å·²ä¸Šå‚³æª”æ¡ˆæœƒå‹•æ…‹æ·»åŠ  -->
        </ul>
        
        <!-- æ§åˆ¶æŒ‰éˆ• -->
        <div class="pdf-controls">
          <div class="controls-row">
            <button class="btn btn-primary" onclick="prevPage()">
              <span>â¬…ï¸</span> ä¸Šä¸€é 
            </button>
            <div class="page-info" id="pageInfo">ç¬¬ 1 é  / å…± 1 é </div>
            <button class="btn btn-primary" onclick="nextPage()">
              <span>â¡ï¸</span> ä¸‹ä¸€é 
            </button>
          </div>
          
          <div class="controls-row">
            <button class="btn btn-secondary" onclick="zoomOut()">
              <span>ğŸ”-</span> ç¸®å°
            </button>
            <div class="zoom-info" id="zoomLevel">100%</div>
            <button class="btn btn-secondary" onclick="zoomIn()">
              <span>ğŸ”+</span> æ”¾å¤§
            </button>
          </div>
          
          <button class="btn btn-success" onclick="resetZoom()">
            <span>ğŸ”„</span> é‡ç½®ç¸®æ”¾
          </button>
        </div>
      </div>
      
      <!-- å³å´PDFé¡¯ç¤ºå€åŸŸ -->
      <div class="pdf-canvas-container">
        <canvas id="pdfCanvas"></canvas>
        <div class="status-message" id="pdfStatus">
          <p>è«‹é¸æ“‡æˆ–æ‹–æ”¾PDFæª”æ¡ˆ</p>
          <p><small>æ”¯æ´æ‰€æœ‰æ¨™æº–PDFæ ¼å¼æª”æ¡ˆ</small></p>
        </div>
      </div>
    </div>
  </div>

  <!-- å½±ç‰‡æ’­æ”¾å™¨æ¨™ç±¤é  -->
  <div id="video-tab" class="tab-content">
    <div class="video-viewer">
      <!-- å·¦å´æ§åˆ¶é¢æ¿ -->
      <div class="pdf-sidebar">
        <h3>ğŸ¥ å½±ç‰‡æª”æ¡ˆåˆ—è¡¨</h3>
        
        <!-- æ‹–æ”¾å€åŸŸ -->
        <div class="drop-zone" id="videoDropZone">
          <div style="font-size: 3em;">ğŸ¬</div>
          <p><strong>æ‹–æ”¾å½±ç‰‡æª”æ¡ˆåˆ°æ­¤è™•</strong></p>
          <p>æ”¯æ´MP4ã€WebMã€OGGæ ¼å¼</p>
          <input type="file" id="videoFileInput" accept="video/*" style="display: none;">
          <button class="btn btn-primary" onclick="document.getElementById('videoFileInput').click()">
            ğŸ“ é¸æ“‡å½±ç‰‡æª”æ¡ˆ
          </button>
        </div>
        
        <!-- æª”æ¡ˆåˆ—è¡¨ -->
        <ul class="file-list" id="videoFileList">
          <li data-file="é è¨­å½±ç‰‡" data-url="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4">
            <span class="file-icon">ğŸ¬</span>
            <span>é è¨­ç¯„ä¾‹ï¼šBig Buck Bunny</span>
          </li>
          <!-- å·²ä¸Šå‚³å½±ç‰‡æœƒå‹•æ…‹æ·»åŠ  -->
        </ul>
        
        <!-- æ§åˆ¶æŒ‰éˆ• -->
        <div class="pdf-controls">
          <div class="controls-row">
            <button class="btn btn-primary" onclick="playVideo()">
              <span>â–¶ï¸</span> æ’­æ”¾
            </button>
            <button class="btn btn-secondary" onclick="pauseVideo()">
              <span>â¸ï¸</span> æš«åœ
            </button>
            <button class="btn btn-secondary" onclick="toggleMute()" id="muteBtn">
              <span>ğŸ”Š</span> éœéŸ³
            </button>
          </div>
          
          <div style="margin-top: 15px;">
            <input type="range" id="volumeSlider" min="0" max="100" value="100" 
                   onchange="changeVolume(this.value)" style="width: 100%;">
            <div style="text-align: center; margin-top: 8px;">
              éŸ³é‡: <span id="volumeValue">100</span>%
            </div>
          </div>
          
          <button class="btn btn-success" onclick="fullscreenVideo()" style="margin-top: 15px;">
            <span>ğŸ“º</span> å…¨è¢å¹•
          </button>
        </div>
      </div>
      
      <!-- å³å´å½±ç‰‡æ’­æ”¾å€åŸŸ -->
      <div class="video-player-container">
        <video id="videoPlayer" controls>
          <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
          æ‚¨çš„ç€è¦½å™¨ä¸æ”¯æ´å½±ç‰‡æ’­æ”¾
        </video>
        <div class="status-message" id="videoStatus">
          è«‹é¸æ“‡æˆ–æ‹–æ”¾å½±ç‰‡æª”æ¡ˆ
        </div>
      </div>
    </div>
  </div>

  <!-- Scratchæ•™ææ•´åˆæ¨™ç±¤é  -->
  <div id="scratch-tab" class="tab-content">
    <div class="scratch-integration">
      <h2>ğŸ¨ Scratch ç¨‹å¼è¨­è¨ˆæ•™æ</h2>
      <p>é€™è£¡æ•´åˆäº†åŸå…ˆ Scratch æ•™æç€è¦½å™¨çš„æ‰€æœ‰åŠŸèƒ½ï¼Œæä¾›å®Œæ•´çš„å­¸ç¿’è·¯å¾‘ï¼š</p>
      
      <div class="scratch-categories">
        <div class="category-card" onclick="loadScratchPDF('beginner')">
          <h4>ğŸ¯ åˆéšå…¥é–€</h4>
          <p>åŸºç¤æ¦‚å¿µèˆ‡æ“ä½œ</p>
          <small>é©åˆå®Œå…¨æ–°æ‰‹</small>
        </div>
        
        <div class="category-card" onclick="loadScratchPDF('intermediate')">
          <h4>ğŸ® ä¸­éšæ‡‰ç”¨</h4>
          <p>éŠæˆ²èˆ‡å‹•ç•«è¨­è¨ˆ</p>
          <small>é©åˆæœ‰åŸºç¤è€…</small>
        </div>
        
        <div class="category-card" onclick="loadScratchPDF('advanced')">
          <h4>ğŸ§© é€²éšæŠ€å·§</h4>
          <p>è®Šæ•¸èˆ‡å‡½å¼æ‡‰ç”¨</p>
          <small>é©åˆé€²éšå­¸ç¿’è€…</small>
        </div>
        
        <div class="category-card" onclick="loadScratchPDF('project')">
          <h4>ğŸš€ å°ˆé¡Œå¯¦ä½œ</h4>
          <p>å®Œæ•´å°ˆæ¡ˆé–‹ç™¼</p>
          <small>é©åˆå°ˆé¡Œè£½ä½œ</small>
        </div>
      </div>
      
      <div style="text-align: center; margin-top: 30px;">
        <button class="btn btn-primary" onclick="switchTab('pdf')">
          ğŸ“„ å‰å¾€PDFé–±è®€å™¨
        </button>
        <p style="margin-top: 15px; color: #666;">
          æ‚¨å¯ä»¥åœ¨PDFé–±è®€å™¨ä¸­æŸ¥çœ‹æ‰€æœ‰Scratchæ•™æ
        </p>
      </div>
    </div>
  </div>

  <!-- YouTubeå½±ç‰‡æ•´åˆæ¨™ç±¤é  -->
  <div id="youtube-tab" class="tab-content">
    <div class="youtube-integration">
      <h2>ğŸ“º YouTube æ•™å­¸å½±ç‰‡ç²¾é¸</h2>
      <p>é€™è£¡æ•´åˆäº†åŸå…ˆ YouTube ç²¾é¸å½±ç‰‡çš„æ‰€æœ‰å…§å®¹ï¼š</p>
      
      <div class="youtube-videos">
        <div class="youtube-card" onclick="loadYouTubeVideo('aCZPHX13ZnE')">
          <div class="youtube-thumbnail">ğŸ¨</div>
          <h4>Scratchå‹•ç•«è¨­è¨ˆæ•™å­¸</h4>
          <p>ä»–èŠ±æ­¸å»é¦¬è¹„é¦™</p>
          <small>15:30 â€¢ Scratchæ•™å­¸</small>
        </div>
        
        <div class="youtube-card" onclick="loadYouTubeVideo('Aql3YLDG2a8')">
          <div class="youtube-thumbnail">â°</div>
          <h4>Scratché›»å­é˜è¨­è¨ˆ</h4>
          <p>å‹•ç•«æ•™å­¸</p>
          <small>12:45 â€¢ Scratchæ•™å­¸</small>
        </div>
        
        <div class="youtube-card" onclick="loadYouTubeVideo('j_eMTP5-lcA')">
          <div class="youtube-thumbnail">ğŸ§®</div>
          <h4>Scratchè¨ˆç®—å™¨è¨­è¨ˆ</h4>
          <p>å¤šåŠŸèƒ½é›»å­è¨ˆç®—å™¨</p>
          <small>18:20 â€¢ Scratchæ•™å­¸</small>
        </div>
        
        <div class="youtube-card" onclick="loadYouTubeVideo('rHZhnBZwCCs')">
          <div class="youtube-thumbnail">ğŸª¨</div>
          <h4>åœ°è³ªå‹•ç•«è§£æ</h4>
          <p>Geological V's rules</p>
          <small>åœ°è³ªæ•™å­¸</small>
        </div>
      </div>
      
      <div style="text-align: center; margin-top: 30px;">
        <button class="btn btn-primary" onclick="switchToYouTubeTab()">
          ğŸ¥ å‰å¾€å½±ç‰‡æ’­æ”¾å™¨
        </button>
        <p style="margin-top: 15px; color: #666;">
          é»æ“Šä¸Šæ–¹å½±ç‰‡å¡ç‰‡å³å¯åœ¨å½±ç‰‡æ’­æ”¾å™¨ä¸­è§€çœ‹
        </p>
        
        <div style="margin-top: 20px;">
          <a href="https://www.youtube.com/@chday7919" target="_blank" class="btn btn-outline">
            ğŸ“º å‰å¾€YouTubeé »é“
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- æª”æ¡ˆä¸Šå‚³æ¨™ç±¤é  -->
  <div id="upload-tab" class="tab-content">
    <div class="pdf-sidebar" style="max-width: 800px; margin: 0 auto;">
      <h3>ğŸ“¤ æ‰¹é‡æª”æ¡ˆä¸Šå‚³</h3>
      
      <div class="drop-zone" id="multiDropZone" style="min-height: 300px;">
        <div style="font-size: 4em;">ğŸ“</div>
        <p><strong>æ‹–æ”¾å¤šå€‹æª”æ¡ˆåˆ°æ­¤è™•</strong></p>
        <p>æ”¯æ´PDFã€å½±ç‰‡ã€åœ–ç‰‡æª”æ¡ˆ</p>
        <p class="file-types">ğŸ“„ PDFæª”æ¡ˆ | ğŸ¬ å½±ç‰‡æª”æ¡ˆ | ğŸ–¼ï¸ åœ–ç‰‡æª”æ¡ˆ</p>
        <input type="file" id="multiFileInput" accept=".pdf,video/*,image/*" multiple style="display: none;">
        <button class="btn btn-primary" onclick="document.getElementById('multiFileInput').click()">
          ğŸ“‚ é¸æ“‡å¤šå€‹æª”æ¡ˆ
        </button>
      </div>
      
      <div style="margin-top: 30px;">
        <h4>ğŸ“‹ ä¸Šå‚³æª”æ¡ˆåˆ—è¡¨</h4>
        <div id="uploadList" style="max-height: 300px; overflow-y: auto; margin-top: 10px;">
          <p style="color: #666; text-align: center; padding: 20px;">å°šæœªé¸æ“‡æª”æ¡ˆ</p>
        </div>
        
        <div style="margin-top: 20px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap;">
          <button class="btn btn-primary" onclick="processUploads()">
            ğŸš€ é–‹å§‹ä¸Šå‚³
          </button>
          <button class="btn btn-secondary" onclick="clearUploadList()">
            ğŸ—‘ï¸ æ¸…ç©ºåˆ—è¡¨
          </button>
        </div>
      </div>
      
      <div class="status-message" id="uploadStatus" style="margin-top: 20px;">
        æº–å‚™ä¸Šå‚³æª”æ¡ˆ...
      </div>
    </div>
  </div>

  <footer class="page-footer">
    <div class="navigation-buttons">
      <a href="index.html" class="btn btn-primary">â¬…ï¸ è¿”å›é¦–é </a>
      <a href="viewer_geo.html" class="btn btn-secondary">ğŸª¨ åœ°è³ªæ•™æ</a>
      <a href="resources.html" class="btn btn-secondary">ğŸ”— æ¨è–¦è³‡æº</a>
      <a href="comments.html" class="btn btn-outline">ğŸ’¬ ç•™è¨€æ¿</a>
    </div>
    
    <div class="footer-info">
      <p>&copy; 2025 CHDAY169 æ•™æå¹³å° | Created by chday169</p>
      <p>ğŸ“§ è¯çµ¡ä¿¡ç®±ï¼š<a href="mailto:chday169@gmail.com">chday169@gmail.com</a> | 
         ğŸ“º YouTubeï¼š<a href="https://www.youtube.com/@chday7919" target="_blank">@chday7919</a></p>
      <p><small>ğŸ”§ æœ¬é é¢å·²æ•´åˆåŸå…ˆçš„ Scratch æ•™æç€è¦½å™¨å’Œ YouTube å½±ç‰‡æ’­æ”¾å™¨</small></p>
    </div>
  </footer>

  <script>
    // ============ é€šç”¨åŠŸèƒ½ ============
    // URLåƒæ•¸è™•ç†
    const urlParams = new URLSearchParams(window.location.search);
    const tabParam = urlParams.get('tab');
    
    // æ¨™ç±¤é åˆ‡æ›
    function switchTab(tabName) {
      // ç§»é™¤æ‰€æœ‰activeé¡
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      document.querySelectorAll('.tab-content').forEach(c => {
        c.classList.remove('active');
      });
      
      // æ·»åŠ activeé¡åˆ°ç•¶å‰æŒ‰éˆ•å’Œå°æ‡‰å…§å®¹
      const tabBtn = document.querySelector(`[data-tab="${tabName}-tab"]`);
      const tabContent = document.getElementById(`${tabName}-tab`);
      
      if (tabBtn && tabContent) {
        tabBtn.classList.add('active');
        tabContent.classList.add('active');
        
        // æ›´æ–°éºµåŒ…å±‘
        const tabNames = {
          'pdf': 'PDFé–±è®€å™¨',
          'video': 'å½±ç‰‡æ’­æ”¾å™¨',
          'scratch': 'Scratchæ•™æ',
          'youtube': 'YouTubeå½±ç‰‡',
          'upload': 'æª”æ¡ˆä¸Šå‚³'
        };
        document.getElementById('current-tab-name').textContent = tabNames[tabName] || tabName;
        
        // æ›´æ–°URLä½†ä¸é‡æ–°è¼‰å…¥é é¢
        const newUrl = new URL(window.location);
        newUrl.searchParams.set('tab', tabName);
        window.history.replaceState({}, '', newUrl);
      }
    }
    
    // åˆå§‹åŒ–æ™‚æ ¹æ“šURLåƒæ•¸åˆ‡æ›æ¨™ç±¤é 
    document.addEventListener('DOMContentLoaded', function() {
      if (tabParam) {
        switchTab(tabParam);
      }
      
      // åˆå§‹åŒ–PDFå’Œå½±ç‰‡
      loadDefaultPDF();
      loadDefaultVideo();
    });

    // ============ PDFé–±è®€å™¨åŠŸèƒ½ ============
    let currentPDF = null;
    let currentPage = 1;
    let totalPages = 1;
    let scale = 1.5;
    let uploadedPDFs = [];

    function loadDefaultPDF() {
      const defaultPDF = document.querySelector('#pdfFileList li[data-file="é è¨­PDF"]');
      if (defaultPDF) {
        loadPDF(defaultPDF.getAttribute('data-url'), defaultPDF.textContent);
      }
    }

    // PDFæ‹–æ”¾åŠŸèƒ½
    const pdfDropZone = document.getElementById('pdfDropZone');
    const pdfFileInput = document.getElementById('pdfFileInput');
    const pdfFileList = document.getElementById('pdfFileList');

    pdfDropZone.addEventListener('click', () => pdfFileInput.click());

    pdfDropZone.addEventListener('dragover', (e) => {
      e.preventDefault();
      pdfDropZone.classList.add('dragover');
    });

    pdfDropZone.addEventListener('dragleave', () => {
      pdfDropZone.classList.remove('dragover');
    });

    pdfDropZone.addEventListener('drop', (e) => {
      e.preventDefault();
      pdfDropZone.classList.remove('dragover');
      
      const files = Array.from(e.dataTransfer.files);
      files.forEach(file => {
        if (file.type === 'application/pdf' || file.name.endsWith('.pdf')) {
          handlePDFUpload(file);
        }
      });
    });

    pdfFileInput.addEventListener('change', (e) => {
      const files = Array.from(e.target.files);
      files.forEach(file => {
        if (file.type === 'application/pdf' || file.name.endsWith('.pdf')) {
          handlePDFUpload(file);
        }
      });
    });

    function handlePDFUpload(file) {
      const fileId = 'pdf_' + Date.now();
      const fileObj = {
        id: fileId,
        name: file.name,
        file: file,
        url: URL.createObjectURL(file)
      };
      
      uploadedPDFs.push(fileObj);
      
      // æ·»åŠ åˆ°æª”æ¡ˆåˆ—è¡¨
      const listItem = document.createElement('li');
      listItem.innerHTML = `<span class="file-icon">ğŸ“„</span><span>${file.name}</span>`;
      listItem.setAttribute('data-file', file.name);
      listItem.setAttribute('data-id', fileId);
      listItem.addEventListener('click', () => loadPDF(fileObj.url, file.name));
      
      pdfFileList.appendChild(listItem);
      
      // è‡ªå‹•è¼‰å…¥ç¬¬ä¸€å€‹ä¸Šå‚³çš„PDF
      if (uploadedPDFs.length === 1) {
        loadPDF(fileObj.url, file.name);
      }
      
      document.getElementById('pdfStatus').innerHTML = `<p><span class="loading"></span>å·²ä¸Šå‚³: ${file.name}</p>`;
    }

    async function loadPDF(url, fileName) {
      try {
        document.getElementById('pdfStatus').innerHTML = '<p><span class="loading"></span>è¼‰å…¥PDFä¸­...</p>';
        
        const pdf = await pdfjsLib.getDocument(url).promise;
        currentPDF = pdf;
        totalPages = pdf.numPages;
        currentPage = 1;
        
        await renderPage();
        document.getElementById('pdfStatus').innerHTML = `<p>âœ… å·²è¼‰å…¥: ${fileName}</p>`;
        
        // æ›´æ–°æª”æ¡ˆåˆ—è¡¨activeç‹€æ…‹
        document.querySelectorAll('#pdfFileList li').forEach(li => {
          li.classList.remove('active');
        });
        document.querySelector(`#pdfFileList li[data-file="${fileName}"]`).classList.add('active');
      } catch (error) {
        document.getElementById('pdfStatus').innerHTML = `<p>âŒ è¼‰å…¥PDFå¤±æ•—: ${error.message}</p>`;
      }
    }

    async function renderPage() {
      if (!currentPDF) return;
      
      try {
        const page = await currentPDF.getPage(currentPage);
        const viewport = page.getViewport({ scale });
        const canvas = document.getElementById('pdfCanvas');
        const ctx = canvas.getContext('2d');
        
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        
        await page.render({
          canvasContext: ctx,
          viewport: viewport
        }).promise;
        
        document.getElementById('pageInfo').textContent = `ç¬¬ ${currentPage} é  / å…± ${totalPages} é `;
        document.getElementById('zoomLevel').textContent = Math.round(scale * 100) + '%';
      } catch (error) {
        console.error('æ¸²æŸ“é é¢å¤±æ•—:', error);
      }
    }

    function prevPage() {
      if (currentPDF && currentPage > 1) {
        currentPage--;
        renderPage();
      }
    }

    function nextPage() {
      if (currentPDF && currentPage < totalPages) {
        currentPage++;
        renderPage();
      }
    }

    function zoomIn() {
      scale += 0.25;
      if (currentPDF) renderPage();
    }

    function zoomOut() {
      scale = Math.max(0.5, scale - 0.25);
      if (currentPDF) renderPage();
    }

    function resetZoom() {
      scale = 1.5;
      if (currentPDF) renderPage();
    }

    // ============ å½±ç‰‡æ’­æ”¾å™¨åŠŸèƒ½ ============
    const videoDropZone = document.getElementById('videoDropZone');
    const videoFileInput = document.getElementById('videoFileInput');
    const videoFileList = document.getElementById('videoFileList');
    const videoPlayer = document.getElementById('videoPlayer');
    let uploadedVideos = [];

    function loadDefaultVideo() {
      const defaultVideo = document.querySelector('#videoFileList li[data-file="é è¨­å½±ç‰‡"]');
      if (defaultVideo) {
        loadVideo(defaultVideo.getAttribute('data-url'), defaultVideo.textContent);
      }
    }

    videoDropZone.addEventListener('click', () => videoFileInput.click());

    videoDropZone.addEventListener('dragover', (e) => {
      e.preventDefault();
      videoDropZone.classList.add('dragover');
    });

    videoDropZone.addEventListener('dragleave', () => {
      videoDropZone.classList.remove('dragover');
    });

    videoDropZone.addEventListener('drop', (e) => {
      e.preventDefault();
      videoDropZone.classList.remove('dragover');
      
      const files = Array.from(e.dataTransfer.files);
      files.forEach(file => {
        if (file.type.startsWith('video/') || 
            ['.mp4', '.webm', '.ogg', '.mov'].some(ext => file.name.endsWith(ext))) {
          handleVideoUpload(file);
        }
      });
    });

    videoFileInput.addEventListener('change', (e) => {
      const files = Array.from(e.target.files);
      files.forEach(file => {
        if (file.type.startsWith('video/') || 
            ['.mp4', '.webm', '.ogg', '.mov'].some(ext => file.name.endsWith(ext))) {
          handleVideoUpload(file);
        }
      });
    });

    function handleVideoUpload(file) {
      const fileId = 'video_' + Date.now();
      const fileObj = {
        id: fileId,
        name: file.name,
        file: file,
        url: URL.createObjectURL(file)
      };
      
      uploadedVideos.push(fileObj);
      
      // æ·»åŠ åˆ°æª”æ¡ˆåˆ—è¡¨
      const listItem = document.createElement('li');
      listItem.innerHTML = `<span class="file-icon">ğŸ¬</span><span>${file.name}</span>`;
      listItem.setAttribute('data-file', file.name);
      listItem.setAttribute('data-id', fileId);
      listItem.addEventListener('click', () => loadVideo(fileObj.url, file.name));
      
      videoFileList.appendChild(listItem);
      
      // è‡ªå‹•è¼‰å…¥ç¬¬ä¸€å€‹ä¸Šå‚³çš„å½±ç‰‡
      if (uploadedVideos.length === 1) {
        loadVideo(fileObj.url, file.name);
      }
      
      document.getElementById('videoStatus').innerHTML = `<span class="loading"></span>å·²ä¸Šå‚³: ${file.name}`;
    }

    function loadVideo(url, fileName) {
      videoPlayer.src = url;
      videoPlayer.load();
      document.getElementById('videoStatus').textContent = `âœ… å·²è¼‰å…¥: ${fileName}`;
      
      // æ›´æ–°æª”æ¡ˆåˆ—è¡¨activeç‹€æ…‹
      document.querySelectorAll('#videoFileList li').forEach(li => {
        li.classList.remove('active');
      });
      document.querySelector(`#videoFileList li[data-file="${fileName}"]`).classList.add('active');
    }

    function playVideo() {
      videoPlayer.play();
      document.getElementById('videoStatus').textContent = 'â–¶ï¸ æ’­æ”¾ä¸­...';
    }

    function pauseVideo() {
      videoPlayer.pause();
      document.getElementById('videoStatus').textContent = 'â¸ï¸ å·²æš«åœ';
    }

    function toggleMute() {
      videoPlayer.muted = !videoPlayer.muted;
      const muteBtn = document.getElementById('muteBtn');
      muteBtn.innerHTML = videoPlayer.muted ? '<span>ğŸ”‡</span> å–æ¶ˆéœéŸ³' : '<span>ğŸ”Š</span> éœéŸ³';
    }

    function changeVolume(value) {
      videoPlayer.volume = value / 100;
      document.getElementById('volumeValue').textContent = value;
    }

    function fullscreenVideo() {
      const container = document.querySelector('.video-player-container');
      if (container.requestFullscreen) {
        container.requestFullscreen();
      } else if (container.webkitRequestFullscreen) {
        container.webkitRequestFullscreen();
      } else if (container.msRequestFullscreen) {
        container.msRequestFullscreen();
      }
    }

    // ============ Scratchæ•´åˆåŠŸèƒ½ ============
    function loadScratchPDF(level) {
      switchTab('pdf');
      
      // æ¨¡æ“¬è¼‰å…¥å°æ‡‰é›£åº¦çš„PDF
      const levelNames = {
        'beginner': 'åˆéšå…¥é–€æ•™æ',
        'intermediate': 'ä¸­éšæ‡‰ç”¨æ•™æ',
        'advanced': 'é€²éšæŠ€å·§æ•™æ',
        'project': 'å°ˆé¡Œå¯¦ä½œæ•™æ'
      };
      
      document.getElementById('pdfStatus').innerHTML = `<p><span class="loading"></span>è¼‰å…¥${levelNames[level]}...</p>`;
      
      // é€™è£¡å¯ä»¥å¯¦éš›è¼‰å…¥å°æ‡‰çš„PDFæª”æ¡ˆ
      setTimeout(() => {
        document.getElementById('pdfStatus').innerHTML = `<p>âœ… å·²è¼‰å…¥${levelNames[level]}</p>
        <p><small>è«‹åœ¨å·¦å´é¸æ“‡å…·é«”çš„æ•™ææª”æ¡ˆ</small></p>`;
      }, 1000);
    }

    // ============ YouTubeæ•´åˆåŠŸèƒ½ ============
    function loadYouTubeVideo(videoId) {
      switchTab('video');
      
      const videoUrls = {
        'aCZPHX13ZnE': 'https://www.youtube.com/embed/aCZPHX13ZnE',
        'Aql3YLDG2a8': 'https://www.youtube.com/embed/Aql3YLDG2a8',
        'j_eMTP5-lcA': 'https://www.youtube.com/embed/j_eMTP5-lcA',
        'rHZhnBZwCCs': 'https://www.youtube.com/embed/rHZhnBZwCCs'
      };
      
      const videoTitles = {
        'aCZPHX13ZnE': 'Scratchå‹•ç•«è¨­è¨ˆæ•™å­¸ï¼šä»–èŠ±æ­¸å»é¦¬è¹„é¦™',
        'Aql3YLDG2a8': 'Scratché›»å­é˜è¨­è¨ˆå‹•ç•«æ•™å­¸',
        'j_eMTP5-lcA': 'Scratchå¤šåŠŸèƒ½é›»å­è¨ˆç®—å™¨è¨­è¨ˆå‹•ç•«æ•™å­¸',
        'rHZhnBZwCCs': 'åœ°è³ªå‹•ç•«è§£æï¼šGeological V\'s rules 0001'
      };
      
      const url = videoUrls[videoId];
      const title = videoTitles[videoId];
      
      if (url) {
        // æ›¿æ›videoå…ƒç´ ç‚ºiframe
        const iframe = document.createElement('iframe');
        iframe.src = url;
        iframe.width = '100%';
        iframe.height = '500';
        iframe.frameBorder = '0';
        iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
        iframe.allowFullscreen = true;
        iframe.title = title;
        
        const container = document.querySelector('.video-player-container');
        const oldPlayer = document.getElementById('videoPlayer');
        container.replaceChild(iframe, oldPlayer);
        iframe.id = 'videoPlayer';
        
        document.getElementById('videoStatus').textContent = `ğŸ“º æ­£åœ¨æ’­æ”¾: ${title}`;
      }
    }

    function switchToYouTubeTab() {
      switchTab('video');
      document.getElementById('videoStatus').textContent = 'è«‹é¸æ“‡YouTubeå½±ç‰‡æˆ–ä¸Šå‚³æœ¬åœ°å½±ç‰‡æª”æ¡ˆ';
    }

    // ============ æ‰¹é‡ä¸Šå‚³åŠŸèƒ½ ============
    const multiDropZone = document.getElementById('multiDropZone');
    const multiFileInput = document.getElementById('multiFileInput');
    const uploadList = document.getElementById('uploadList');
    const uploadStatus = document.getElementById('uploadStatus');
    let uploadQueue = [];

    multiDropZone.addEventListener('click', () => multiFileInput.click());

    multiDropZone.addEventListener('dragover', (e) => {
      e.preventDefault();
      multiDropZone.classList.add('dragover');
    });

    multiDropZone.addEventListener('dragleave', () => {
      multiDropZone.classList.remove('dragover');
    });

    multiDropZone.addEventListener('drop', (e) => {
      e.preventDefault();
      multiDropZone.classList.remove('dragover');
      
      const files = Array.from(e.dataTransfer.files);
      addFilesToUploadQueue(files);
    });

    multiFileInput.addEventListener('change', (e) => {
      const files = Array.from(e.target.files);
      addFilesToUploadQueue(files);
    });

    function addFilesToUploadQueue(files) {
      files.forEach(file => {
        const fileType = getFileType(file);
        if (!fileType) {
          uploadStatus.innerHTML = `<span style="color: #dc3545;">âŒ ä¸æ”¯æ´çš„æª”æ¡ˆé¡å‹: ${file.name}</span>`;
          return;
        }
        
        const fileObj = {
          id: 'file_' + Date.now() + Math.random(),
          name: file.name,
          size: formatFileSize(file.size),
          type: fileType,
          file: file,
          status: 'pending'
        };
        
        uploadQueue.push(fileObj);
        updateUploadList();
      });
      
      uploadStatus.innerHTML = `<span style="color: #28a745;">âœ… å·²æ·»åŠ  ${files.length} å€‹æª”æ¡ˆåˆ°ä¸Šå‚³ä½‡åˆ—</span>`;
    }

    function getFileType(file) {
      if (file.type === 'application/pdf' || file.name.endsWith('.pdf')) {
        return 'pdf';
      } else if (file.type.startsWith('video/')) {
        return 'video';
      } else if (file.type.startsWith('image/')) {
        return 'image';
      } else if (['.mp4', '.webm', '.ogg', '.mov'].some(ext => file.name.endsWith(ext))) {
        return 'video';
      } else if (['.jpg', '.jpeg', '.png', '.gif', '.bmp'].some(ext => file.name.endsWith(ext))) {
        return 'image';
      }
      return null;
    }

    function formatFileSize(bytes) {
      if (bytes === 0) return '0 Bytes';
      const k = 1024;
      const sizes = ['Bytes', 'KB', 'MB', 'GB'];
      const i = Math.floor(Math.log(bytes) / Math.log(k));
      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    function updateUploadList() {
      uploadList.innerHTML = '';
      
      if (uploadQueue.length === 0) {
        uploadList.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">å°šæœªé¸æ“‡æª”æ¡ˆ</p>';
        return;
      }
      
      uploadQueue.forEach((fileObj, index) => {
        const item = document.createElement('div');
        item.style.cssText = `
          padding: 12px;
          margin-bottom: 8px;
          background: #f8f9fa;
          border-radius: 6px;
          border-left: 4px solid ${getStatusColor(fileObj.status)};
          display: flex;
          justify-content: space-between;
          align-items: center;
        `;
        
        const icon = getFileIcon(fileObj.type);
        
        item.innerHTML = `
          <div>
            <div style="font-weight: bold;">${icon} ${fileObj.name}</div>
            <div style="font-size: 0.8rem; color: #666; margin-top: 4px;">
              ${fileObj.size} â€¢ ${fileObj.type.toUpperCase()} â€¢ ${getStatusText(fileObj.status)}
            </div>
          </div>
          <div>
            <button onclick="removeFromQueue('${fileObj.id}')" style="background: none; border: none; color: #dc3545; cursor: pointer; font-size: 1.2rem;">
              Ã—
            </button>
          </div>
        `;
        
        uploadList.appendChild(item);
      });
    }

    function getFileIcon(type) {
      const icons = {
        'pdf': 'ğŸ“„',
        'video': 'ğŸ¬',
        'image': 'ğŸ–¼ï¸'
      };
      return icons[type] || 'ğŸ“';
    }

    function getStatusColor(status) {
      const colors = {
        'pending': '#ffc107',
        'uploading': '#17a2b8',
        'success': '#28a745',
        'error': '#dc3545'
      };
      return colors[status] || '#6c757d';
    }

    function getStatusText(status) {
      const texts = {
        'pending': 'ç­‰å¾…ä¸Šå‚³',
        'uploading': 'ä¸Šå‚³ä¸­...',
        'success': 'ä¸Šå‚³æˆåŠŸ',
        'error': 'ä¸Šå‚³å¤±æ•—'
      };
      return texts[status] || 'æœªçŸ¥ç‹€æ…‹';
    }

    function removeFromQueue(fileId) {
      uploadQueue = uploadQueue.filter(file => file.id !== fileId);
      updateUploadList();
      uploadStatus.innerHTML = `<span style="color: #6c757d;">ğŸ—‘ï¸ å·²å¾ä½‡åˆ—ä¸­ç§»é™¤æª”æ¡ˆ</span>`;
    }

    function clearUploadList() {
      uploadQueue = [];
      updateUploadList();
      uploadStatus.innerHTML = `<span style="color: #6c757d;">ğŸ—‘ï¸ å·²æ¸…ç©ºä¸Šå‚³ä½‡åˆ—</span>`;
    }

    async function processUploads() {
      if (uploadQueue.length === 0) {
        uploadStatus.innerHTML = `<span style="color: #dc3545;">âŒ ä¸Šå‚³ä½‡åˆ—ç‚ºç©º</span>`;
        return;
      }
      
      uploadStatus.innerHTML = `<span class="loading"></span>é–‹å§‹è™•ç† ${uploadQueue.length} å€‹æª”æ¡ˆ...`;
      
      let successCount = 0;
      let errorCount = 0;
      
      for (let i = 0; i < uploadQueue.length; i++) {
        const fileObj = uploadQueue[i];
        
        // æ›´æ–°ç‹€æ…‹ç‚ºä¸Šå‚³ä¸­
        fileObj.status = 'uploading';
        updateUploadList();
        
        try {
          // æ¨¡æ“¬ä¸Šå‚³éç¨‹
          await simulateUpload(fileObj);
          
          // æ ¹æ“šæª”æ¡ˆé¡å‹è™•ç†
          if (fileObj.type === 'pdf') {
            handlePDFUpload(fileObj.file);
          } else if (fileObj.type === 'video') {
            handleVideoUpload(fileObj.file);
          }
          
          fileObj.status = 'success';
          successCount++;
          
          uploadStatus.innerHTML = `<span style="color: #28a745;">âœ… å·²ä¸Šå‚³ ${i+1}/${uploadQueue.length}: ${fileObj.name}</span>`;
          
        } catch (error) {
          fileObj.status = 'error';
          errorCount++;
          
          uploadStatus.innerHTML = `<span style="color: #dc3545;">âŒ ä¸Šå‚³å¤±æ•— ${i+1}/${uploadQueue.length}: ${fileObj.name}</span>`;
        }
        
        updateUploadList();
        
        // ç¨å¾®å»¶é²ï¼Œè®“ä½¿ç”¨è€…å¯ä»¥çœ‹åˆ°é€²åº¦
        await new Promise(resolve => setTimeout(resolve, 500));
      }
      
      // é¡¯ç¤ºæœ€çµ‚çµæœ
      uploadStatus.innerHTML = `
        <div style="background: #d4edda; color: #155724; padding: 15px; border-radius: 6px;">
          <strong>ğŸ‰ ä¸Šå‚³å®Œæˆï¼</strong><br>
          æˆåŠŸ: ${successCount} å€‹æª”æ¡ˆ<br>
          å¤±æ•—: ${errorCount} å€‹æª”æ¡ˆ<br>
          ç¸½è¨ˆ: ${uploadQueue.length} å€‹æª”æ¡ˆ
        </div>
      `;
    }

    function simulateUpload(fileObj) {
      return new Promise((resolve, reject) => {
        // æ¨¡æ“¬ä¸Šå‚³å»¶é²
        const delay = Math.random() * 2000 + 1000; // 1-3ç§’
        setTimeout(() => {
          // 90%æˆåŠŸç‡
          if (Math.random() < 0.9) {
            resolve();
          } else {
            reject(new Error('æ¨¡æ“¬ä¸Šå‚³å¤±æ•—'));
          }
        }, delay);
      });
    }

    // ============ éµç›¤å¿«æ·éµ ============
    document.addEventListener('keydown', (e) => {
      // PDFå¿«æ·éµ
      if (document.getElementById('pdf-tab').classList.contains('active')) {
        if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') prevPage();
        if (e.key === 'ArrowRight' || e.key === 'ArrowDown') nextPage();
        if (e.key === '+' || e.key === '=') zoomIn();
        if (e.key === '-' || e.key === '_') zoomOut();
        if (e.key === '0') resetZoom();
      }
      
      // å½±ç‰‡å¿«æ·éµ
      if (document.getElementById('video-tab').classList.contains('active')) {
        if (e.key === ' ' || e.key === 'k') {
          e.preventDefault();
          if (videoPlayer.paused) {
            playVideo();
          } else {
            pauseVideo();
          }
        }
        if (e.key === 'm' || e.key === 'M') {
          toggleMute();
        }
        if (e.key === 'f' || e.key === 'F') {
          fullscreenVideo();
        }
      }
    });
    
    // è‡ªå‹•åˆ‡æ›åˆ°å°æ‡‰æ¨™ç±¤é çš„æç¤º
    window.addEventListener('load', function() {
      // å¦‚æœå¾èˆŠé é¢è·³è½‰éä¾†ï¼Œé¡¯ç¤ºæ­¡è¿è¨Šæ¯
      if (document.referrer.includes('viewer_scr.html') || 
          document.referrer.includes('youtube-videos.html')) {
        setTimeout(() => {
          alert('ğŸ‰ æ­¡è¿ä½¿ç”¨æ•´åˆç‰ˆå¤šåª’é«”æ•™æä¸­å¿ƒï¼\n\næ‰€æœ‰PDFå’Œå½±ç‰‡åŠŸèƒ½éƒ½å·²æ•´åˆåœ¨æ­¤é é¢ã€‚');
        }, 500);
      }
    });
  </script>
</body>
</html>